<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>基础知识 - 视频处理学习</title>
    <link rel="stylesheet" href="style.css">
    <script src="js/mermaid.min.js"></script>
    <script>
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'base',
            themeVariables: {
                primaryColor: '#667eea',
                primaryTextColor: '#fff',
                primaryBorderColor: '#764ba2',
                lineColor: '#667eea',
                secondaryColor: '#764ba2',
                tertiaryColor: '#f0f0f0'
            }
        });
    </script>
</head>
<body>
    <div class="layout-container">
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1><a href="index.html" style="color: white; text-decoration: none;">VideoLearn</a></h1>
            </div>
            <nav class="sidebar-nav">
                <ul class="nav-tree">
                    <li>
                        <span class="nav-category">基础知识</span>
                        <ul class="sub-nav">
                            <li><a href="#basics-1">视频基本概念</a></li>
                            <li><a href="#basics-2">色彩空间</a></li>
                            <li><a href="#basics-3">容器与编码</a></li>
                            <li><a href="#basics-4">图像处理</a></li>
                            <li><a href="#basics-5">图像变换</a></li>
                            <li><a href="#basics-6">边缘检测</a></li>
                            <li><a href="#basics-7">运动估计</a></li>
                            <li><a href="#basics-8">帧类型与GOP</a></li>
                            <li><a href="#basics-9">质量评估</a></li>
                            <li><a href="#basics-10">视频压缩</a></li>
                        </ul>
                    </li>
                    <li>
                        <span class="nav-category">其他章节</span>
                        <ul class="sub-nav">
                            <li><a href="codec.html">编解码技术</a></li>
                            <li><a href="ai.html">AI视频处理</a></li>
                            <li><a href="streaming.html">在线视频</a></li>
                            <li><a href="tools.html">工具框架</a></li>
                            <li><a href="code.html">代码示例</a></li>
                        </ul>
                    </li>
                </ul>
            </nav>
        </aside>

        <main class="main-content">
            <section id="basics" class="section">
                <div class="container">
                    <h2>📊 基础知识可视化</h2>
                    <p style="color: #718096; margin-bottom: 30px;">通过流程图、树图、表格等可视化方式理解视频处理核心概念</p>

                    <!-- 1. 视频基本概念 -->
                    <div class="topic-item" id="basics-1">
                        <h3>1. 视频基本概念</h3>
                        
                        <div class="diagram-container">
                            <div class="diagram-title">视频参数关系图</div>
                            <pre class="mermaid">
graph TD
    A[视频 Video] --> B[帧率 FPS]
    A --> C[分辨率 Resolution]
    A --> D[码率 Bitrate]
    A --> E[长宽比 Aspect Ratio]
    A --> F[像素深度 Bit Depth]
    
    B --> B1[24fps - 电影]
    B --> B2[30fps - 电视]
    B --> B3[60fps - 游戏]
    
    C --> C1[720p 1280×720]
    C --> C2[1080p 1920×1080]
    C --> C3[4K 3840×2160]
    
    D --> D1[影响质量与文件大小]
    D --> D2[单位: bps/kbps/Mbps]
    
    E --> E1[16:9 宽屏]
    E --> E2[4:3 传统]
    E --> E3[21:9 超宽]
    
    F --> F1[8-bit 标准]
    F --> F2[10-bit HDR]
    F --> F3[12-bit 专业]
                            </pre>
                        </div>

                        <table class="visual-table">
                            <thead>
                                <tr>
                                    <th>参数</th>
                                    <th>定义</th>
                                    <th>常见值</th>
                                    <th>影响</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>帧率 (FPS)</strong></td>
                                    <td>每秒显示帧数</td>
                                    <td>24/30/60/120</td>
                                    <td>流畅度、文件大小</td>
                                </tr>
                                <tr>
                                    <td><strong>分辨率</strong></td>
                                    <td>视频空间尺寸</td>
                                    <td>720p/1080p/4K/8K</td>
                                    <td>清晰度、文件大小</td>
                                </tr>
                                <tr>
                                    <td><strong>码率</strong></td>
                                    <td>每秒数据量</td>
                                    <td>1-50+ Mbps</td>
                                    <td>画质、文件大小</td>
                                </tr>
                                <tr>
                                    <td><strong>像素深度</strong></td>
                                    <td>每像素位数</td>
                                    <td>8/10/12 bit</td>
                                    <td>色彩精度</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- 2. 色彩空间 -->
                    <div class="topic-item" id="basics-2">
                        <h3>2. 色彩空间与转换</h3>
                        
                        <div class="comparison-box">
                            <div class="comparison-item">
                                <h4>RGB 色彩空间</h4>
                                <ul>
                                    <li>加色模型</li>
                                    <li>R(红) + G(绿) + B(蓝)</li>
                                    <li>适合显示设备</li>
                                    <li>真彩色: 24-bit (8×3)</li>
                                </ul>
                            </div>
                            <div class="comparison-item">
                                <h4>YUV/YCbCr 色彩空间</h4>
                                <ul>
                                    <li>亮色分离模型</li>
                                    <li>Y: 亮度 (Luma)</li>
                                    <li>U/V: 色度 (Chroma)</li>
                                    <li>适合视频压缩</li>
                                </ul>
                            </div>
                        </div>

                        <div class="diagram-container">
                            <div class="diagram-title">RGB ↔ YUV 转换流程</div>
                            <pre class="mermaid">
flowchart LR
    subgraph RGB["RGB色彩空间"]
        R[Red 红]
        G[Green 绿]
        B[Blue 蓝]
    end
    
    subgraph Convert["色彩空间转换"]
        F1[BT.601 标清]
        F2[BT.709 高清]
        F3[BT.2020 超高清]
    end
    
    subgraph YUV["YUV色彩空间"]
        Y[Luma 亮度]
        U[Chroma-U 蓝色色度]
        V[Chroma-V 红色色度]
    end
    
    RGB --> Convert
    Convert --> YUV
    
    style RGB fill:#e3f2fd
    style YUV fill:#f3e5f5
    style Convert fill:#fff9c4
                            </pre>
                        </div>

                        <div class="knowledge-card">
                            <h4>📝 RGB → YUV 转换公式 (BT.601)</h4>
                            <pre style="background: #f5f5f5; padding: 10px; border-radius: 4px; overflow-x: auto;">
Y  = 0.299R + 0.587G + 0.114B
U  = -0.169R - 0.331G + 0.500B + 128
V  = 0.500R - 0.419G - 0.081B + 128</pre>
                        </div>

                        <div class="diagram-container">
                            <div class="diagram-title">色度采样格式对比</div>
                            <pre class="mermaid">
graph TB
    A[色度采样 Chroma Subsampling] --> B[4:4:4]
    A --> C[4:2:2]
    A --> D[4:2:0]
    A --> E[4:1:1]
    
    B --> B1[无色度采样]
    B --> B2[最高质量]
    B --> B3[专业后期]
    
    C --> C1[水平采样减半]
    C --> C2[高质量]
    C --> C3[专业视频]
    
    D --> D1[水平垂直各减半]
    D --> D2[最常用]
    D --> D3[消费级视频]
    
    E --> E1[水平采样1/4]
    E --> E2[最低质量]
    E --> E3[视频会议]
                            </pre>
                        </div>
                    </div>

                    <!-- 3. 容器与编码格式 -->
                    <div class="topic-item" id="basics-3">
                        <h3>3. 容器格式与编码格式</h3>
                        
                        <div class="diagram-container">
                            <div class="diagram-title">容器 vs 编码 区别</div>
                            <pre class="mermaid">
graph LR
    A[视频文件] --> B[容器 Container]
    B --> C[视频流 Video Stream]
    B --> D[音频流 Audio Stream]
    B --> E[字幕 Subtitles]
    B --> F[元数据 Metadata]
    
    C --> G[编码格式 Codec]
    G --> G1[H.264/AVC]
    G --> G2[H.265/HEVC]
    G --> G3[VP9]
    G --> G4[AV1]
    
    style B fill:#e3f2fd
    style G fill:#f3e5f5
                            </pre>
                        </div>

                        <table class="visual-table">
                            <thead>
                                <tr>
                                    <th>容器格式</th>
                                    <th>特点</th>
                                    <th>支持编码</th>
                                    <th>应用场景</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>MP4</strong></td>
                                    <td>兼容性最好，广泛支持</td>
                                    <td>H.264, H.265, AAC</td>
                                    <td>网络视频、移动设备</td>
                                </tr>
                                <tr>
                                    <td><strong>MKV</strong></td>
                                    <td>开源，支持多轨道</td>
                                    <td>几乎所有编码</td>
                                    <td>高清电影、多语言</td>
                                </tr>
                                <tr>
                                    <td><strong>WebM</strong></td>
                                    <td>Web优化，免费开源</td>
                                    <td>VP9, AV1, Opus</td>
                                    <td>HTML5视频</td>
                                </tr>
                                <tr>
                                    <td><strong>MOV</strong></td>
                                    <td>Apple格式，质量高</td>
                                    <td>H.264, ProRes</td>
                                    <td>Apple设备、专业制作</td>
                                </tr>
                            </tbody>
                        </table>

                        <div class="diagram-container">
                            <div class="diagram-title">编码格式发展历程</div>
                            <pre class="mermaid">
timeline
    title 视频编码发展历程
    1998 : MPEG-2 : DVD, 数字电视
    2003 : H.264/AVC : 主流编码, 广泛应用
    2008 : VP8 : Google开源
    2013 : H.265/HEVC : 50%压缩提升
    2013 : VP9 : YouTube采用
    2018 : AV1 : 免费开源, 新一代编码
                            </pre>
                        </div>
                    </div>

                    <!-- 4. 图像处理 -->
                    <div class="topic-item" id="basics-4">
                        <h3>4. 图像处理基础</h3>
                        
                        <div class="diagram-container">
                            <div class="diagram-title">图像处理方法分类</div>
                            <pre class="mermaid">
graph TB
    A[图像处理] --> B[空域处理]
    A --> C[频域处理]
    
    B --> B1[线性滤波]
    B --> B2[非线性滤波]
    B --> B3[形态学操作]
    
    B1 --> B1a[均值滤波]
    B1 --> B1b[高斯滤波]
    B1 --> B1c[卷积运算]
    
    B2 --> B2a[中值滤波]
    B2 --> B2b[双边滤波]
    
    C --> C1[傅里叶变换 DFT/FFT]
    C --> C2[频域滤波]
    
    C2 --> C2a[低通滤波 - 去噪]
    C2 --> C2b[高通滤波 - 边缘增强]
    
    style A fill:#667eea,color:#fff
    style B fill:#764ba2,color:#fff
    style C fill:#764ba2,color:#fff
                            </pre>
                        </div>

                        <div class="comparison-box">
                            <div class="comparison-item">
                                <h4>线性滤波</h4>
                                <ul>
                                    <li>均值滤波 - 简单平滑</li>
                                    <li>高斯滤波 - 平滑去噪</li>
                                    <li>特点: 可分离、快速</li>
                                </ul>
                            </div>
                            <div class="comparison-item">
                                <h4>非线性滤波</h4>
                                <ul>
                                    <li>中值滤波 - 去椒盐噪声</li>
                                    <li>双边滤波 - 保边去噪</li>
                                    <li>特点: 保边缘效果好</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- 5. 图像变换 -->
                    <div class="topic-item" id="basics-5">
                        <h3>5. 图像变换技术</h3>
                        
                        <div class="diagram-container">
                            <div class="diagram-title">DCT变换编码流程</div>
                            <pre class="mermaid">
flowchart LR
    A[原始图像块<br/>8×8像素] --> B[DCT变换]
    B --> C[频域系数]
    C --> D[量化]
    D --> E[量化后系数]
    E --> F[熵编码]
    F --> G[压缩数据]
    
    style A fill:#e3f2fd
    style C fill:#f3e5f5
    style G fill:#c8e6c9
                            </pre>
                        </div>

                        <div class="knowledge-card">
                            <h4>🔑 DCT (离散余弦变换) 核心特点</h4>
                            <ul>
                                <li><strong>能量集中</strong>：大部分能量集中在低频系数</li>
                                <li><strong>去相关</strong>：消除像素间的相关性</li>
                                <li><strong>可分离</strong>：2D DCT可分解为两次1D DCT</li>
                                <li><strong>快速算法</strong>：有高效的快速算法实现</li>
                            </ul>
                        </div>

                        <table class="visual-table">
                            <thead>
                                <tr>
                                    <th>变换类型</th>
                                    <th>应用</th>
                                    <th>优点</th>
                                    <th>缺点</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>DCT</strong></td>
                                    <td>JPEG, H.264, H.265</td>
                                    <td>能量集中、快速算法</td>
                                    <td>块效应</td>
                                </tr>
                                <tr>
                                    <td><strong>DWT</strong></td>
                                    <td>JPEG 2000</td>
                                    <td>多分辨率、无块效应</td>
                                    <td>计算复杂</td>
                                </tr>
                                <tr>
                                    <td><strong>DFT</strong></td>
                                    <td>频谱分析</td>
                                    <td>物理意义明确</td>
                                    <td>复数计算</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- 6. 边缘检测 -->
                    <div class="topic-item" id="basics-6">
                        <h3>6. 边缘检测与特征提取</h3>
                        
                        <div class="diagram-container">
                            <div class="diagram-title">边缘检测方法分类</div>
                            <pre class="mermaid">
graph TB
    A[边缘检测] --> B[一阶导数算子]
    A --> C[二阶导数算子]
    A --> D[最优边缘检测]
    
    B --> B1[Sobel算子]
    B --> B2[Prewitt算子]
    B --> B3[Roberts算子]
    
    C --> C1[Laplacian算子]
    C --> C2[LoG算子]
    
    D --> D1[Canny边缘检测]
    D1 --> D1a[高斯滤波]
    D1a --> D1b[计算梯度]
    D1b --> D1c[非极大值抑制]
    D1c --> D1d[双阈值检测]
    
    style A fill:#667eea,color:#fff
    style D fill:#764ba2,color:#fff
                            </pre>
                        </div>

                        <div class="flow-steps">
                            <div class="flow-step">1. 高斯滤波</div>
                            <div class="flow-step">2. 计算梯度</div>
                            <div class="flow-step">3. 非极大值抑制</div>
                            <div class="flow-step">4. 双阈值检测</div>
                        </div>
                        <p style="text-align: center; color: #718096; margin-top: 10px;">Canny边缘检测算法流程</p>
                    </div>

                    <!-- 7. 运动估计 -->
                    <div class="topic-item" id="basics-7">
                        <h3>7. 运动估计与运动补偿</h3>
                        
                        <div class="diagram-container">
                            <div class="diagram-title">运动估计原理</div>
                            <pre class="mermaid">
flowchart TB
    A[当前帧] --> B[划分为宏块]
    B --> C[块匹配算法]
    C --> D[在参考帧搜索]
    D --> E[找到最佳匹配]
    E --> F[计算运动矢量MV]
    F --> G[运动补偿预测]
    
    H[参考帧] --> D
    
    style A fill:#e3f2fd
    style H fill:#f3e5f5
    style G fill:#c8e6c9
                            </pre>
                        </div>

                        <table class="visual-table">
                            <thead>
                                <tr>
                                    <th>搜索算法</th>
                                    <th>搜索点数</th>
                                    <th>精度</th>
                                    <th>速度</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>全搜索</strong></td>
                                    <td>最多</td>
                                    <td>最高</td>
                                    <td>最慢</td>
                                </tr>
                                <tr>
                                    <td><strong>三步搜索</strong></td>
                                    <td>25点</td>
                                    <td>中等</td>
                                    <td>快</td>
                                </tr>
                                <tr>
                                    <td><strong>钻石搜索</strong></td>
                                    <td>较少</td>
                                    <td>较高</td>
                                    <td>很快</td>
                                </tr>
                                <tr>
                                    <td><strong>六边形搜索</strong></td>
                                    <td>少</td>
                                    <td>高</td>
                                    <td>最快</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- 8. 帧类型与GOP -->
                    <div class="topic-item" id="basics-8">
                        <h3>8. 帧类型与GOP结构</h3>
                        
                        <div class="diagram-container">
                            <div class="diagram-title">视频帧类型对比</div>
                            <pre class="mermaid">
graph TB
    A[视频帧类型] --> B[I帧<br/>Intra Frame]
    A --> C[P帧<br/>Predicted Frame]
    A --> D[B帧<br/>Bi-directional Frame]
    
    B --> B1[帧内编码]
    B --> B2[独立解码]
    B --> B3[数据量最大]
    B --> B4[随机访问点]
    
    C --> C1[前向预测]
    C --> C2[参考前帧]
    C --> C3[数据量中等]
    C --> C4[运动补偿]
    
    D --> D1[双向预测]
    D --> D2[参考前后帧]
    D --> D3[数据量最小]
    D --> D4[压缩率最高]
    
    style B fill:#ffcdd2
    style C fill:#c8e6c9
    style D fill:#bbdefb
                            </pre>
                        </div>

                        <div class="diagram-container">
                            <div class="diagram-title">GOP结构示例</div>
                            <pre class="mermaid">
sequenceDiagram
    participant I as I帧
    participant P1 as P帧
    participant B1 as B帧
    participant B2 as B帧
    participant P2 as P帧
    participant B3 as B帧
    participant B4 as B帧
    
    Note over I: GOP开始
    I->>P1: 预测参考
    P1->>B1: 前向参考
    P1->>B2: 前向参考
    I->>B1: 后向参考
    I->>B2: 后向参考
    P1->>P2: 预测参考
    P2->>B3: 前向参考
    P2->>B4: 前向参考
    P1->>B3: 后向参考
    P1->>B4: 后向参考
    Note over B4: GOP结束
                            </pre>
                        </div>

                        <div class="knowledge-card">
                            <h4>📐 GOP (Group of Pictures) 参数</h4>
                            <ul>
                                <li><strong>GOP长度</strong>：两个I帧之间的帧数，影响压缩率和随机访问</li>
                                <li><strong>闭合GOP</strong>：GOP独立，不依赖其他GOP</li>
                                <li><strong>开放GOP</strong>：可参考其他GOP的帧，压缩率更高</li>
                                <li><strong>典型结构</strong>：IBBPBBPBBP (长度为12)</li>
                            </ul>
                        </div>
                    </div>

                    <!-- 9. 质量评估 -->
                    <div class="topic-item" id="basics-9">
                        <h3>9. 视频质量评估指标</h3>
                        
                        <div class="diagram-container">
                            <div class="diagram-title">质量评估方法分类</div>
                            <pre class="mermaid">
graph TB
    A[视频质量评估] --> B[主观评估]
    A --> C[客观评估]
    
    B --> B1[MOS]
    B --> B2[DMOS]
    B --> B3[ITU-R BT.500]
    
    C --> C1[全参考 FR]
    C --> C2[部分参考 RR]
    C --> C3[无参考 NR]
    
    C1 --> C1a[PSNR]
    C1 --> C1b[SSIM]
    C1 --> C1c[VMAF]
    
    C3 --> C3a[深度学习方法]
    C3 --> C3b[自然场景统计]
    
    style A fill:#667eea,color:#fff
    style B fill:#764ba2,color:#fff
    style C fill:#764ba2,color:#fff
                            </pre>
                        </div>

                        <table class="visual-table">
                            <thead>
                                <tr>
                                    <th>指标</th>
                                    <th>公式/说明</th>
                                    <th>范围</th>
                                    <th>应用</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>PSNR</strong></td>
                                    <td>10·log₁₀(MAX²/MSE)</td>
                                    <td>>30dB 可接受</td>
                                    <td>编码质量评估</td>
                                </tr>
                                <tr>
                                    <td><strong>SSIM</strong></td>
                                    <td>结构相似性指数</td>
                                    <td>[0, 1]</td>
                                    <td>感知质量评估</td>
                                </tr>
                                <tr>
                                    <td><strong>VMAF</strong></td>
                                    <td>Netflix多方法融合</td>
                                    <td>[0, 100]</td>
                                    <td>流媒体质量</td>
                                </tr>
                                <tr>
                                    <td><strong>MOS</strong></td>
                                    <td>平均意见分</td>
                                    <td>[1, 5]</td>
                                    <td>主观测试</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- 10. 视频压缩 -->
                    <div class="topic-item" id="basics-10">
                        <h3>10. 视频压缩原理</h3>
                        
                        <div class="diagram-container">
                            <div class="diagram-title">视频压缩去除冗余</div>
                            <pre class="mermaid">
graph TB
    A[视频数据冗余] --> B[空间冗余]
    A --> C[时间冗余]
    A --> D[编码冗余]
    A --> E[视觉冗余]
    
    B --> B1[帧内预测]
    B --> B2[变换编码 DCT]
    
    C --> C1[帧间预测]
    C --> C2[运动估计补偿]
    
    D --> D1[熵编码]
    D --> D2[Huffman/算术编码]
    
    E --> E1[量化]
    E --> E2[色度采样]
    
    style A fill:#667eea,color:#fff
    style B fill:#e3f2fd
    style C fill:#c8e6c9
    style D fill:#fff9c4
    style E fill:#f3e5f5
                            </pre>
                        </div>

                        <div class="diagram-container">
                            <div class="diagram-title">混合编码框架</div>
                            <pre class="mermaid">
flowchart LR
    A[输入帧] --> B[帧内/帧间预测选择]
    B --> C[预测编码]
    C --> D[残差]
    D --> E[变换 DCT]
    E --> F[量化]
    F --> G[熵编码]
    G --> H[输出码流]
    
    F --> I[反量化]
    I --> J[反变换]
    J --> K[重建帧]
    K --> L[帧存储]
    L --> C
    
    style A fill:#e3f2fd
    style H fill:#c8e6c9
                            </pre>
                        </div>

                        <div class="knowledge-card">
                            <h4>⚡ 率失真优化 (RDO)</h4>
                            <pre style="background: #f5f5f5; padding: 10px; border-radius: 4px;">
代价函数: J = D + λ·R

D = Distortion (失真)
R = Rate (码率)
λ = Lagrange multiplier (拉格朗日乘子)

目标: 在给定码率下最小化失真，或在给定失真下最小化码率</pre>
                        </div>
                    </div>

                </div>
            </section>
        </main>
    </div>

    <script>
        // 平滑滚动
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // 高亮当前导航项
        const observerOptions = {
            root: null,
            rootMargin: '-20% 0px -70% 0px',
            threshold: 0
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const id = entry.target.getAttribute('id');
                    document.querySelectorAll('.sidebar-nav a').forEach(link => {
                        link.classList.remove('active');
                        if (link.getAttribute('href') === `#${id}`) {
                            link.classList.add('active');
                        }
                    });
                }
            });
        }, observerOptions);

        document.querySelectorAll('.topic-item[id]').forEach(item => {
            observer.observe(item);
        });
    </script>
</body>
</html>
